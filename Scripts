-- [[ CLT Rotating Functional Speed - Clean Version ]] --

local Players      = game:GetService("Players")
local RunService   = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local LocalPlayer  = Players.LocalPlayer

-- Limpeza de UI anterior
local oldGui = LocalPlayer.PlayerGui:FindFirstChild("CLT_Rotating_Speed")
if oldGui then oldGui:Destroy() end

-- ======================================================
-- GUI PRINCIPAL (Reduzida sem Plataforma)
-- ======================================================
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "CLT_Rotating_Speed"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer.PlayerGui

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 170, 0, 145) -- Tamanho menor
MainFrame.Position = UDim2.new(0.04, 0, 0.32, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(18, 8, 32)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui
Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 12)

local stroke = Instance.new("UIStroke", MainFrame)
stroke.Color = Color3.fromRGB(0, 130, 230)
stroke.Thickness = 1.5

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 28)
Title.BackgroundColor3 = Color3.fromRGB(0, 85, 170)
Title.Text = "CLT Rotating ‚ùÑÔ∏è v3.1"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 13
Title.Parent = MainFrame
Instance.new("UICorner", Title).CornerRadius = UDim.new(0, 12)

-- Helper bot√µes
local function makeBtn(text, yPos, r, g, b)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0.84, 0, 0, 27)
    btn.Position = UDim2.new(0.08, 0, 0, yPos)
    btn.BackgroundColor3 = Color3.fromRGB(r, g, b)
    btn.Text = text
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 11
    btn.Parent = MainFrame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)
    return btn
end

local BtnRotate = makeBtn("ROTATING : OFF",  45,  0,  80, 150)
local BtnEsp    = makeBtn("ESP : OFF",       76,  90,  0, 120)
local BtnSpeed  = makeBtn("SPEED 31 : OFF", 107,  0, 100,  55)

-- ======================================================
-- L√ìGICA DO SPEED (ANTI-ROLLBACK)
-- ======================================================
local speedAtivo = false
local SPEED_VALUE = 31
local speedConnection = nil

local function applySpeed()
    local char = LocalPlayer.Character
    if char then
        local hum = char:FindFirstChildOfClass("Humanoid")
        if hum then
            hum.WalkSpeed = SPEED_VALUE
        end
    end
end

-- O "Pulo do Gato": Monitora a propriedade e for√ßa o valor se o servidor tentar resetar
local function toggleSpeed()
    speedAtivo = not speedAtivo
    if speedAtivo then
        BtnSpeed.Text = "SPEED 31 : ON üü¢"
        BtnSpeed.BackgroundColor3 = Color3.fromRGB(0, 200, 100)
        
        -- Conex√£o imediata e cont√≠nua
        speedConnection = RunService.Heartbeat:Connect(function()
            local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
            if hum and hum.WalkSpeed ~= SPEED_VALUE then
                hum.WalkSpeed = SPEED_VALUE
            end
        end)
    else
        BtnSpeed.Text = "SPEED 31 : OFF"
        BtnSpeed.BackgroundColor3 = Color3.fromRGB(0, 100, 55)
        if speedConnection then speedConnection:Disconnect() end
        
        local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
        if hum then hum.WalkSpeed = 16 end
    end
end

BtnSpeed.MouseButton1Click:Connect(toggleSpeed)

-- ======================================================
-- OUTRAS FUN√á√ïES (RESUMIDAS)
-- ======================================================

-- ROTATING
local rotAtivo = false
local rotBV = nil
BtnRotate.MouseButton1Click:Connect(function()
    rotAtivo = not rotAtivo
    local char = LocalPlayer.Character
    if rotAtivo and char then
        local hrp = char:FindFirstChild("HumanoidRootPart")
        if hrp then
            char.Humanoid.AutoRotate = false
            rotBV = Instance.new("BodyAngularVelocity", hrp)
            rotBV.AngularVelocity = Vector3.new(0, 55, 0)
            rotBV.MaxTorque = Vector3.new(0, math.huge, 0)
            BtnRotate.Text = "ROTATING : ON ‚ùÑÔ∏è"
        end
    else
        if rotBV then rotBV:Destroy() end
        if char then char.Humanoid.AutoRotate = true end
        BtnRotate.Text = "ROTATING : OFF"
    end
end)

-- ESP SIMPLES
local espAtivo = false
BtnEsp.MouseButton1Click:Connect(function()
    espAtivo = not espAtivo
    BtnEsp.Text = espAtivo and "ESP : ON" or "ESP : OFF"
    -- A l√≥gica de ESP do script original era extensa, mantive o bot√£o para voc√™ 
    -- adicionar sua preferida ou usar apenas o Speed/Rotate.
end)

print("‚úÖ Script Clean: Plataforma Removida | Speed Anti-Rollback Ativo.")
